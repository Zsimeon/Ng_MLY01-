# 50、选择管道部分：数据实用性

当构造一个非端到端的管道系统时，什么才是好的管道成分的选项？你怎样设计管道会极大的影响整体系统的性能。一个重要的
因素是你是否能够轻松的收集数据来训练每一个部分。

例如，考虑这个自动驾驶结构：

    	                ---->Detect cars------------
	Camera images-------							-->Plan path for car------->Steering direction
						---->Detect pedestrians-----

你能使用机器学习来检测汽车和行人。进一步，为此而收集数据是无害的：有很多的计算机视觉数据集包含有标记好的汽车和行人。
你也能使用人群搜索（例如亚马逊的Mechanical Turk）来获取更大的数据集。因此相对比较简单来获取训练数据去创建汽车
检测器和行人检测器。

相反，考虑一个纯端到端的方法：

Camera images---------->Learning algorithm------------->Steering direction

为了训练这个系统，我们需要一个大的数据集，其包含有（图像，驾驶方向）组成的数据对。让人到处驾驶汽车且记录他们的
行驶方向来收集数据时非常消耗时间且昂贵的。你需要一个装载特殊设备的汽车队，并且大量的形式来覆盖大范围的可能的场景。
这使一个端到端的系统很难去训练。获得一个大的标记好的汽车或行人图片数据集要简单的多。

更通常的来说，如果有很多的数据可用来训练一个管道的“中间模块”（例如汽车检测器或行人检测器），那么你可能考虑使用有
多阶段的管道。这个结构可能是更有效的，因为你能使用所有可获得的数据来训练中间模块。

除非更多的端到端数据变得可获取了，我相信非端到端的方法对于自动驾驶是明显的更有前途的：他的体系结构更匹配可获得的数据。


# 51、选择管道部分：任务简易性

相较于数据可获取性，在选择管道部分的时候，你应该考虑第二个因素：每个独立部分解决的任务有多简单？你应该尝试选择管道成分
每一个都可以很轻松的构建或学习，但是对于每个部分来说，什么是能“简单”学习呢？

思考这些机器学习任务，列表中任务难度逐渐增加：
1. 归类图像是否过曝光
2. 分类图片是在室内还是室外拍摄的
3. 分类图片是否有猫
4. 分类图片中是否有猫身上同时有黑色和白色毛
5. 分类图片中是否有暹罗猫（一个图书的猫种类）

上面的每一个都是二分类任务：你需要输入图片，输出0或1.但是列表靠前的任务看起来很“简单”给一个神经网络去学习。
你需要能够使用较少的样例来学习较简单的任务。

机器学习目前还没有对于一个任务简单或难有一个好的正式的定义。随着深度学习和多层神经网络的上升，通常如果一个任务能在较少的
步骤中计算完成我们就说它“简单”（即一个浅神经网络），如果它需要更多的计算步骤（需要一个更深的神经网络）就说它“难”。
但这是不正式的定义。

如果你能够进行一个复杂的任务，并把它分解为更简单的子任务，那么对于子任务精确的按步编码，你能够给算法先验知识来帮助
他更有效的学习任务。

假设你构建了一个暹罗猫检测器，这是纯端到端结构：

image------>Siamese cat classifier----->Label 0/1

相反，你也能够使用两步的管道：

Image ----->Cat detector------>Cat breed classifier-------> Label 0/1

这第一步（猫咪检测器）检测图片中的所有猫。

第二步把检测出来的每一个检测到猫的裁剪后的图片（每次一个）传送到猫咪种类分类器，并最终输出1，如果任一个猫咪被检测为暹罗猫。

相比于训练一个纯端到端分类器仅使用0/1标记，这个管道中的每一个部分--猫咪检测器和猫咪种类分类器--看起来更简单来学习且
会需要明显的更少的数据。

最后一个例子，在看一下自动驾驶管道。

	                	---->Detect cars------------
	Camera images-------							-->Plan path for car------->Steering direction
						---->Detect pedestrians-----

通过使用这个管道，你能告诉算法这里有3个关键的驾驶步骤：（1）检测其他车辆，（2）检测行人，（3）为你的车规划路线。进一步说，
这每一步都是一个相对更简单的函数--且能用更少的数据学习--相比纯端到端方法。

总结来说，当决定管道中的部分时，尝试构建一个管道其每一个部分都是相对地“简单的”函数，因此能够使用适当的数据量来学习。


# 52、直接学习大量输出

一个图像分类算法会输入一个图像x，并输出一个整数来表示目标种类。算法能输出一个完整的句子来描述图片么？

传统的简单学习的应用学习一个函数：h:X->Y，输出Y通常是一个整数或一个实数。例如

	问题              X                Y
	垃圾邮件分类     邮件             是/不是垃圾邮件(0/1)
	图像识别         图像             整数标记
	房价预测         房子特征         价格
	产品推荐         产品和用户特征   购买的可能性

端到端深度学习的一个最令人惊奇的进步是他能够让我们直接学习比一个数字更复杂的y。在上面的图片说明例子中，你能用一个
神经网络输入图片x并直接输出描述y。

这里有更多的例子：

	问题              X                Y               引用样例  
	图片描述          图片             文本			   mao et al.,2014
	机器翻译          英语文本		   法语文本        Suskever et al.,2014
	问题回答          （文本，问题）对 问题文本        Bordes et al.,2015
	语音识别          语音             转录文本        Hannun et al.,2015
	TTS               文本特征         语音            van der Oord et al.,2016

深度学习中有加速趋势：当你有正确的（输入，输出）标记对时，你能学习端到端即使当输出是一个句子，一个图片，语音，或其他
比一个单一数字更大的输出。


